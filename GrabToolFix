loadstring(game:HttpGet("https://raw.githubusercontent.com/evilionx3/new-scripts/refs/heads/main/partclaim.lua"))()

-- Создание Grab Tool в стиле Possession Tool
local player = game.Players.LocalPlayer
local GrabTool = Instance.new("Tool")
GrabTool.Name = "Grab Tool"
GrabTool.RequiresHandle = false -- Убираем Handle, как в Possession Tool
GrabTool.Parent = player.Backpack -- Изначальное подключение

-- Динамическое подключение при смене персонажа
player.CharacterAdded:Connect(function()
    GrabTool.Parent = player.Backpack
end)

-- Переменные
local mouse = player:GetMouse()
local grabbedPart = nil
local isHolding = false
local grabbedCharacter = nil

-- Функция для захвата объекта
local function grabPart(target)
    if target and not target.Anchored and not isHolding and target:IsA("BasePart") then
        grabbedPart = target
        isHolding = true

        local bodyPosition = Instance.new("BodyPosition")
        bodyPosition.MaxForce = Vector3.new(1e7, 1e7, 1e7)
        bodyPosition.P = 5000
        bodyPosition.D = 50
        bodyPosition.Position = player.Character.HumanoidRootPart.Position + Vector3.new(0, 5, -5)
        bodyPosition.Parent = grabbedPart

        grabbedPart.Massless = true
        grabbedPart.CanCollide = false
    end
end

-- Функция для захвата игрока (себя)
local function grabCharacter()
    if not isHolding then
        local character = player.Character or player.CharacterAdded:Wait()
        local root = character:FindFirstChild("HumanoidRootPart")
        if not root then return end

        local bodyPosition = Instance.new("BodyPosition")
        bodyPosition.MaxForce = Vector3.new(1e7, 1e7, 1e7)
        bodyPosition.P = 5000
        bodyPosition.D = 50
        bodyPosition.Position = root.Position + Vector3.new(0, 5, -5)
        bodyPosition.Parent = root

        character:BreakJoints()
        character.HumanoidRootPart.CanCollide = false
        character.HumanoidRootPart.Massless = true

        grabbedCharacter = character
        isHolding = true
    end
end

-- Функция для броска объекта
local function throwPart()
    if grabbedPart and isHolding then
        grabbedPart.Massless = false
        grabbedPart.CanCollide = true

        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(1e7, 1e7, 1e7)
        bodyVelocity.Velocity = mouse.UnitRay.Direction * 3000
        bodyVelocity.Parent = grabbedPart

        if grabbedPart:FindFirstChildOfClass("BodyPosition") then
            grabbedPart:FindFirstChildOfClass("BodyPosition"):Destroy()
        end

        game:GetService("Debris"):AddItem(bodyVelocity, 100)
        grabbedPart = nil
        isHolding = false
    end
end

-- Функция для броска персонажа (себя)
local function throwCharacter()
    if isHolding and grabbedCharacter then
        local root = grabbedCharacter:FindFirstChild("HumanoidRootPart")
        if not root then return end

        grabbedCharacter.HumanoidRootPart.CanCollide = true
        grabbedCharacter.HumanoidRootPart.Massless = false

        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(1e7, 1e7, 1e7)
        bodyVelocity.Velocity = mouse.UnitRay.Direction * 5000
        bodyVelocity.Parent = root

        game:GetService("Debris"):AddItem(bodyVelocity, 100)
        grabbedCharacter = nil
        isHolding = false
    end
end

-- Логика активации инструмента
GrabTool.Activated:Connect(function()
    local target = mouse.Target

    if isHolding then
        if grabbedPart then
            throwPart()
        elseif grabbedCharacter then
            throwCharacter()
        end
    else
        if target then
            grabPart(target)
        end
    end
end)